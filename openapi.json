{"openapi":"3.1.0","info":{"title":"Aglio Multi-Tenant Restaurant API","description":"Multi-tenant restaurant recommendation and menu system","version":"2.0.0"},"paths":{"/categories/":{"get":{"tags":["categories"],"summary":"Get all categories","description":"Retrieve all unique (group_category, category_brief) pairs.","operationId":"read_categories_categories__get","parameters":[{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"List of unique (group_category, category_brief) pairs","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"},"title":"Response Read Categories Categories  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/menu/":{"get":{"tags":["menu"],"summary":"Get menu items","description":"Retrieve menu items with optional filters: group_category, category_brief, is_veg, price_cap.","operationId":"read_menu_menu__get","parameters":[{"name":"group_category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group Category"}},{"name":"category_brief","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"title":"Category Brief"}},{"name":"is_veg","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Veg"}},{"name":"price_cap","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price Cap"}},{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"List of menu items with optional filters","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItem"},"title":"Response Read Menu Menu  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/filtered_recommendations/":{"get":{"tags":["recommendations"],"summary":"Filtered Recommendations","operationId":"filtered_recommendations_filtered_recommendations__get","parameters":[{"name":"is_veg","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Veg"}},{"name":"price_cap","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Price Cap"}},{"name":"group_category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group Category"}},{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/featured/":{"get":{"tags":["featured"],"summary":"Get featured dishes","description":"Retrieve dishes marked as featured.\n\n- **session_id**: Required session identifier\n- **Returns**: List of complete dish payloads marked as featured","operationId":"read_featured_featured__get","parameters":[{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"Featured dishes in dish_carousal format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBlocks"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/prev_orders/":{"get":{"tags":["orders"],"summary":"Get previous orders","description":"Retrieve previous orders for the current user.\n\n- **session_id**: Required session identifier\n- **Returns**: List of previous orders, each as a block containing a date and a carousel of dish cards for that order.","operationId":"read_prev_orders_prev_orders__get","parameters":[{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"Previous orders in dish_carousal format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviousOrdersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/upsell/":{"get":{"tags":["upsell"],"summary":"Get upsell recommendations","description":"Get upsell recommendations based on cart and filters.\n\n- **session_id**: Required session identifier\n- **cart**: JSON string representing the current cart items\n- **is_veg**: Optional filter for vegetarian items\n- **price_cap**: Optional maximum price filter\n- **category**: Optional category filter\n- **Returns**: Upsell recommendations","operationId":"get_upsell_recommendations_upsell__get","parameters":[{"name":"cart","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"JSON string of cart items","title":"Cart"},"description":"JSON string of cart items"},{"name":"is_veg","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter for vegetarian items","title":"Is Veg"},"description":"Filter for vegetarian items"},{"name":"price_cap","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Maximum price filter","title":"Price Cap"},"description":"Maximum price filter"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Category filter","title":"Category"},"description":"Category filter"},{"name":"x-session-id","in":"header","required":true,"schema":{"type":"string","title":"X-Session-Id"}}],"responses":{"200":{"description":"Upsell recommendations based on cart and filters","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Upsell Recommendations Upsell  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","description":"Health check endpoint","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/tenant-info":{"get":{"summary":"Tenant Info","description":"Get current tenant information (useful for debugging)","operationId":"tenant_info_tenant_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Category":{"properties":{"group_category":{"type":"string","title":"Group Category"},"category_brief":{"type":"string","title":"Category Brief"},"total_count":{"type":"integer","title":"Total Count","default":0},"veg_count":{"type":"integer","title":"Veg Count","default":0}},"type":"object","required":["group_category","category_brief"],"title":"Category"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MenuItem":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","title":"Price"},"veg_flag":{"type":"boolean","title":"Veg Flag"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"category_brief":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Brief"}},"type":"object","required":["id","name","description","price","veg_flag","image_url","category_brief"],"title":"MenuItem"},"PreviousOrderBlock":{"properties":{"options":{"items":{"$ref":"#/components/schemas/ResponseDishCard"},"type":"array","title":"Options"},"type":{"type":"string","const":"thumbnail_row","title":"Type"},"date":{"type":"string","format":"date","title":"Date"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","default":""}},"type":"object","required":["options","type","date"],"title":"PreviousOrderBlock","description":"Extended ResponseDishCarouselBlock model for previous orders"},"PreviousOrdersResponse":{"properties":{"blocks":{"items":{"$ref":"#/components/schemas/PreviousOrderBlock"},"type":"array","title":"Blocks"}},"type":"object","required":["blocks"],"title":"PreviousOrdersResponse","description":"Response model for previous orders"},"QuickRepliesBlock":{"properties":{"type":{"type":"string","const":"quick_replies","title":"Type"},"options":{"items":{"type":"string"},"type":"array","title":"Options"}},"type":"object","required":["type","options"],"title":"QuickRepliesBlock"},"ResponseBlocks":{"properties":{"blocks":{"items":{"anyOf":[{"$ref":"#/components/schemas/TextBlock"},{"$ref":"#/components/schemas/ResponseDishCarouselBlock"},{"$ref":"#/components/schemas/QuickRepliesBlock"},{"$ref":"#/components/schemas/ResponseDishCard"}]},"type":"array","title":"Blocks"}},"type":"object","required":["blocks"],"title":"ResponseBlocks","description":"Base response model for API endpoints that return blocks format"},"ResponseDishCard":{"properties":{"type":{"type":"string","const":"dish_card","title":"Type"},"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","default":""},"price":{"type":"number","title":"Price"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","default":[]},"veg_flag":{"type":"boolean","title":"Veg Flag","default":false},"insta_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Insta Id"}},"type":"object","required":["type","id","name","price"],"title":"ResponseDishCard","description":"Extended DishCard model that includes all fields needed for rendering in the frontend"},"ResponseDishCarouselBlock":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","default":""},"type":{"type":"string","enum":["dish_carousal","story_carousal"],"title":"Type"},"options":{"items":{"$ref":"#/components/schemas/ResponseDishCard"},"type":"array","title":"Options"}},"type":"object","required":["type","options"],"title":"ResponseDishCarouselBlock","description":"Extended DishCarouselBlock model that uses ResponseDishCard"},"TextBlock":{"properties":{"type":{"type":"string","const":"text","title":"Type"},"markdown":{"type":"string","title":"Markdown"}},"type":"object","required":["type","markdown"],"title":"TextBlock"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}